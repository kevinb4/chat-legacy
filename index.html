<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<title>ChatProject</title>
	<link href="css/chatproject.css" rel="stylesheet" type="text/css" />
</head>

<body background="images/bg.png">
	<div id="body">
		<h1>Chat Project</h1>
		<div id="chat-box">
			<div id="chat-textarea"></div>
		</div>
		<br/>
		<input id="send" class="create" type="button" onclick="" value="Send" />
		<div id="reply-box">
			<input type="text" contenteditable="true" id="reply" autocomplete="off" />
		</div>
	</div>
	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script>
	var socket = io(),
		chatbox = $('#chat-box'),
		reply = $('#reply'),
		textarea = $('#chat-textarea'),
		send = $('#send');
	
	socket.on('chat message', function(msg) { // When a message is emitted...
		textarea.append(msg); // ...the message is shown in the chatbox
		chatbox.scrollTop($(chatbox).get(0).scrollHeight); // Scroll down
	});
	send.click(function() { // Clicking the send button
		socket.emit('chat message', reply.val()); // Emit the message
		reply.val(""); // Clear the reply box
	});
	reply.keypress(function(e) { // Checks for keys being pressed
		if (e.which == 13) { // Pressing Enter
			socket.emit('chat message', reply.val()); // Emit the message
			reply.val(""); // Clear the reply box
		}
	});
	</script>
</body>

</html>